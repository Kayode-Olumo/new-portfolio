'use strict';

const _excluded = ["children", "config", "unstable__tailwindSvgFix", "unstable__noScript", "scheme"];
var _templateObject, _templateObject2;
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }
function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }
function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }
function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }
function _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }
Object.defineProperty(exports, '__esModule', {
  value: true
});
var jsxRuntime = require('react/jsx-runtime');
var react = require('react');
var icons = require('@sanity/icons');
var ui = require('@sanity/ui');
var sanity = require('sanity');
var styled = require('styled-components');
function _interopDefaultLegacy(e) {
  return e && typeof e === 'object' && 'default' in e ? e : {
    'default': e
  };
}
var styled__default = /*#__PURE__*/_interopDefaultLegacy(styled);
function isWorkspaces(config) {
  return Array.isArray(config);
}
function isWorkspaceWithTheme(workspace) {
  return Boolean(workspace.theme);
}
function useTheme(config) {
  const workspace = react.useMemo(() => isWorkspaces(config) ? config[0] : config, [config]);
  return react.useMemo(() => isWorkspaceWithTheme(workspace) ? workspace.theme : sanity.defaultTheme, [workspace]);
}
const keyframes = "\nfrom {\n  transform: rotate(0deg);\n}\n\nto {\n  transform: rotate(360deg);\n}\n";
function NextStudioFallbackComponent(props) {
  const {
    config,
    scheme = "light"
  } = props;
  const id = "next-sanity-spinner";
  const theme = useTheme(config);
  const {
    fonts,
    media
  } = theme;
  const styles = ui._responsive(media, [2], size => {
    const {
      ascenderHeight,
      descenderHeight,
      lineHeight,
      iconSize
    } = fonts.text.sizes[size];
    const capHeight = lineHeight - ascenderHeight - descenderHeight;
    return {
      wrapper: {
        animation: "".concat(id, " 500ms linear infinite"),
        color: theme.color[scheme].default.muted.default.enabled.muted.fg,
        width: ui.rem(capHeight),
        height: ui.rem(capHeight)
      },
      svg: {
        display: "block",
        width: ui.rem(iconSize),
        height: ui.rem(iconSize),
        margin: (capHeight - iconSize) / 2
      }
    };
  })[0];
  return /* @__PURE__ */jsxRuntime.jsx("div", {
    style: {
      fontFamily: fonts.text.family,
      backgroundColor: theme.color[scheme].default.base.bg,
      height: "100vh",
      maxHeight: "100dvh",
      overscrollBehavior: "none",
      WebkitFontSmoothing: "antialiased",
      overflow: "auto"
    },
    children: /* @__PURE__ */jsxRuntime.jsxs("div", {
      "data-ui": "Flex",
      style: {
        display: "flex",
        minWidth: 0,
        minHeight: 0,
        alignItems: "center",
        justifyContent: "center",
        flexDirection: "column",
        height: "100%",
        margin: 0,
        padding: 0
      },
      children: [/* @__PURE__ */jsxRuntime.jsx("style", {
        children: "@keyframes ".concat(id, " {").concat(keyframes, "}")
      }, scheme), /* @__PURE__ */jsxRuntime.jsx("div", {
        "data-ui": "Spinner",
        style: styles.wrapper,
        children: /* @__PURE__ */jsxRuntime.jsx(icons.SpinnerIcon, {
          style: styles.svg
        })
      })]
    })
  });
}
const NextStudioFallback = react.memo(NextStudioFallbackComponent);
const Layout = styled__default["default"].div(_templateObject || (_templateObject = _taggedTemplateLiteral(["\n  font-family: ", ";\n  background-color: ", ";\n  height: 100vh;\n  max-height: 100dvh;\n  overscroll-behavior: none;\n  -webkit-font-smoothing: antialiased;\n  overflow: auto;\n\n  ", "\n"])), _ref => {
  let {
    $fontFamily
  } = _ref;
  return $fontFamily;
}, _ref2 => {
  let {
    $bg
  } = _ref2;
  return $bg;
}, _ref3 => {
  let {
    $unstable__tailwindSvgFix
  } = _ref3;
  return $unstable__tailwindSvgFix ? styled.css(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral(["\n          /* override tailwind reset */\n          *:not([data-ui='Popover__arrow']):not([data-ui='Tooltip__arrow']) > svg {\n            display: inline;\n          }\n        "]))) : "";
});
const NextStudioLayoutComponent = _ref4 => {
  let {
    children,
    config,
    scheme = "light",
    unstable__tailwindSvgFix = true
  } = _ref4;
  const theme = useTheme(config);
  return /* @__PURE__ */jsxRuntime.jsx(Layout, {
    "data-ui": "NextStudioLayout",
    $unstable__tailwindSvgFix: unstable__tailwindSvgFix,
    $fontFamily: theme.fonts.text.family,
    $bg: theme.color[scheme].default.base.bg,
    children
  });
};
const NextStudioLayout = react.memo(NextStudioLayoutComponent);
const style = {
  __html: "\n.sanity-app-no-js__root {\n  position: absolute;\n  top: 0;\n  right: 0;\n  left: 0;\n  bottom: 0;\n  background: #fff;\n  z-index: 1;\n}\n\n.sanity-app-no-js__content {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  text-align: center;\n  font-family: helvetica, arial, sans-serif;\n}\n"
};
const NextStudioNoScript = () => /* @__PURE__ */jsxRuntime.jsx("noscript", {
  children: /* @__PURE__ */jsxRuntime.jsx("div", {
    className: "sanity-app-no-js__root",
    children: /* @__PURE__ */jsxRuntime.jsxs("div", {
      className: "sanity-app-no-js__content",
      children: [/* @__PURE__ */jsxRuntime.jsx("style", {
        type: "text/css",
        dangerouslySetInnerHTML: style
      }), /* @__PURE__ */jsxRuntime.jsx("h1", {
        children: "JavaScript disabled"
      }), /* @__PURE__ */jsxRuntime.jsxs("p", {
        children: ["Please ", /* @__PURE__ */jsxRuntime.jsx("a", {
          href: "https://www.enable-javascript.com/",
          children: "enable JavaScript"
        }), " in your browser and reload the page to proceed."]
      })]
    })
  })
});
function NextStudioSuspense(_ref5) {
  let {
    children,
    fallback
  } = _ref5;
  const [mounted, mount] = react.useReducer(() => true, false);
  react.useEffect(mount, [mount]);
  return /* @__PURE__ */jsxRuntime.jsx(react.Suspense, {
    fallback,
    children: mounted ? children : fallback
  });
}
const Studio = react.memo(react.lazy(() => Promise.resolve().then(function () {
  return require('../_chunks/LazyStudio-bf7e0fc9.cjs');
})));
const NextStudioComponent = _ref6 => {
  let {
      children,
      config,
      unstable__tailwindSvgFix = true,
      unstable__noScript = true,
      scheme
    } = _ref6,
    props = _objectWithoutProperties(_ref6, _excluded);
  return /* @__PURE__ */jsxRuntime.jsxs(jsxRuntime.Fragment, {
    children: [!unstable__noScript && /* @__PURE__ */jsxRuntime.jsx(NextStudioNoScript, {}), /* @__PURE__ */jsxRuntime.jsx(NextStudioSuspense, {
      fallback: /* @__PURE__ */jsxRuntime.jsx(NextStudioFallback, {
        config,
        scheme
      }),
      children: /* @__PURE__ */jsxRuntime.jsx(NextStudioLayout, {
        config,
        scheme,
        unstable__tailwindSvgFix,
        children: children || /* @__PURE__ */jsxRuntime.jsx(Studio, _objectSpread({
          config,
          scheme,
          unstable_globalStyles: true
        }, props))
      })
    })]
  });
};
const NextStudio = react.memo(NextStudioComponent);
function createStore() {
  if (typeof document === "undefined") {
    return {
      subscribe: () => () => {},
      getSnapshot: () => "light",
      getServerSnapshot: () => "light"
    };
  }
  const matchMedia = window.matchMedia("(prefers-color-scheme: dark)");
  return {
    subscribe: onStoreChange => {
      matchMedia.addEventListener("change", onStoreChange);
      return () => matchMedia.removeEventListener("change", onStoreChange);
    },
    getSnapshot: () => matchMedia.matches ? "dark" : "light",
    getServerSnapshot: () => "light"
  };
}
const store = createStore();
function usePrefersColorScheme() {
  return react.useSyncExternalStore(store.subscribe, store.getSnapshot, store.getServerSnapshot);
}
exports.NextStudio = NextStudio;
exports.NextStudioFallback = NextStudioFallback;
exports.NextStudioLayout = NextStudioLayout;
exports.NextStudioNoScript = NextStudioNoScript;
exports.NextStudioSuspense = NextStudioSuspense;
exports.usePrefersColorScheme = usePrefersColorScheme;
exports.useTheme = useTheme;
//# sourceMappingURL=index.cjs.map
